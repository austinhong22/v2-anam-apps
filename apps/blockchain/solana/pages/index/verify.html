<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>니모닉 확인</title>
    <link rel="stylesheet" href="../../app.css" />
    <style>
      .verify-card{max-width:640px;margin:24px auto;padding:20px;border-radius:12px;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,0.06)}
      .verify-title{font-size:18px;font-weight:700;margin-bottom:4px}
      .verify-desc{font-size:14px;color:#666;margin-bottom:16px}
      .verify-row{display:flex;gap:12px;margin:12px 0;align-items:center}
      .verify-label{min-width:110px;font-weight:600}
      .verify-input{flex:1;padding:12px;border:2px solid #e0e0e0;border-radius:8px}
      .verify-actions{display:flex;gap:12px;margin-top:16px}
      .btn{padding:12px 16px;border:0;border-radius:10px;cursor:pointer}
      .btn-primary{background:var(--coin-gradient);color:#fff}
      .btn-secondary{background:#eee}
    </style>
  </head>
  <body>
    <div class="container">
      <div class="verify-card">
        <div class="verify-title">니모닉 확인</div>
        <div class="verify-desc">아래 위치의 단어를 입력하세요. 올바르게 입력하면 지갑으로 이동합니다.</div>
        <div id="positions" class="verify-desc"></div>
        <div class="verify-row">
          <div class="verify-label" id="label1">1번째 단어</div>
          <input id="word1" class="verify-input" type="text" placeholder="단어 입력" />
        </div>
        <div class="verify-row">
          <div class="verify-label" id="label2">7번째 단어</div>
          <input id="word2" class="verify-input" type="text" placeholder="단어 입력" />
        </div>
        <div class="verify-actions">
          <button class="btn btn-secondary" onclick="history.back()">뒤로</button>
          <button class="btn btn-primary" onclick="verifyAndContinue()">확인</button>
        </div>
      </div>
    </div>

    <script src="../../assets/solana-bundle.umd.cjs"></script>
    <script src="../../app.js"></script>
    <script>
      function getPayload(){try{const x=localStorage.getItem('mnemonicVerify');return x?JSON.parse(x):null;}catch(e){return null}}
      function verifyAndContinue(){
        const p=getPayload();
        if(!p){alert('검증 정보가 없습니다');return}
        const w1=document.getElementById('word1').value.trim().toLowerCase();
        const w2=document.getElementById('word2').value.trim().toLowerCase();
        if(w1===p.w1 && w2===p.w2){
          // 완료 표시
          try{const wd=localStorage.getItem('walletData');if(wd){const obj=JSON.parse(wd);obj.status='completed';localStorage.setItem('walletData',JSON.stringify(obj));}}catch(_){ }
          // 메인 진입
          window.location.href='../index/index.html';
        }else{
          alert('단어가 일치하지 않습니다');
        }
      }
      (function init(){
        const p=getPayload();
        if(p){
          document.getElementById('label1').textContent=(p.idx1+1)+"번째 단어";
          document.getElementById('label2').textContent=(p.idx2+1)+"번째 단어";
        }
      })();
    </script>
  </body>
 </html>

